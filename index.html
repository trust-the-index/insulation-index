<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Price & Quiet | The Elite Index</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <style>
        body, html { margin: 0; padding: 0; height: 100%; background: #000; color: white; font-family: sans-serif; overflow: hidden; }
        #header { height: 100px; border-bottom: 1px solid #222; position: relative; z-index: 2000; background: #000; }
        #map { position: absolute; top: 100px; bottom: 0; width: 100%; z-index: 1; background: #050505; }
        #sidebar { position: absolute; top: 100px; left: 0; bottom: 0; width: 280px; background: rgba(0,0,0,0.95); z-index: 1500; border-right: 1px solid #222; display: none; padding: 20px; box-sizing: border-box; overflow-y: auto; }
        .utility { height: 35px; display: flex; justify-content: flex-end; padding: 0 20px; align-items: center; border-bottom: 1px solid #111; }
        .nav { height: 65px; display: flex; align-items: center; padding: 0 20px; }
        .pq-logo { color: #4ade80; font-weight: bold; font-size: 24px; margin-right: 20px; text-decoration: none; }
        .btn { background: #111; border: 1px solid #333; color: #888; padding: 8px 15px; border-radius: 20px; cursor: pointer; margin-right: 10px; font-size: 13px; }
        .search-container { position: absolute; top: 120px; left: 50%; transform: translateX(-50%); z-index: 1000; width: 320px; }
        #addrSearch { width: 100%; padding: 12px 20px; border-radius: 25px; border: 1px solid #333; background: rgba(0,0,0,0.85); color: white; outline: none; }
        #namesMenu { display: none; position: absolute; top: 100px; left: 220px; background: #0a0a0a; border: 1px solid #222; width: 200px; z-index: 3000; padding: 10px; border-radius: 8px; }
        .name-item { font-size: 11px; padding: 5px 0; border-bottom: 1px solid #111; color: #777; display: flex; justify-content: space-between; }
        .support-footer { position: absolute; bottom: 20px; left: 50%; transform: translateX(-50%); z-index: 1000; font-size: 11px; color: #444; letter-spacing: 1px; }
        .index-box { position: absolute; bottom: 20px; right: 20px; z-index: 1000; background: rgba(0,0,0,0.8); border: 1px solid #222; padding: 15px; border-radius: 8px; width: 180px; backdrop-filter: blur(5px); }
        .index-value { font-size: 24px; font-weight: bold; color: #4ade80; }
        .row { display: flex; justify-content: space-between; margin-bottom: 12px; font-size: 12px; color: #ccc; }
        .toggle { color: #4ade80; cursor: pointer; font-weight: bold; border: 1px solid #222; padding: 2px 8px; border-radius: 4px; }
        .toggle.off { color: #ef4444; }
    </style>
</head>
<body>
    <div id="header">
        <div class="utility">
            <a href="stats.html" style="color:#555; text-decoration:none; font-size:11px;">STATS & ANALYTICS</a>
            <div style="background:#4ade80; color:black; padding:2px 10px; border-radius:10px; font-size:11px; font-weight:bold; margin-left:15px; cursor:pointer;">LOGIN</div>
        </div>
        <div class="nav">
            <a href="#" class="pq-logo">|||| PQ</a>
            <div class="btn" onclick="toggleSidebar()">Filters →</div>
            <div class="btn" onclick="toggleNames()">Names ▾</div>
            <div class="btn" style="color:#4ade80; border-color:#4ade80;">Elite Index</div>
        </div>
    </div>
    <div id="namesMenu">
        <div class="name-item">Chadwick <span style="color:#4ade80;">14,204 ✓</span></div>
        <div class="name-item">Tinsley <span style="color:#4ade80;">8,112 ✓</span></div>
        <div class="name-item">Sterling <span style="color:#4ade80;">22,091 ✓</span></div>
    </div>
    <div class="search-container">
        <input type="text" id="addrSearch" placeholder="Search Address..." onkeydown="if(event.key==='Enter') doSearch()">
    </div>
    <div id="sidebar">
        <div style="color:#444; font-size:10px; margin-bottom:15px; letter-spacing:1px;">BUFFER FILTERS</div>
        <div class="row">Private Security <span class="toggle" onclick="flip(this)">ON</span></div>
        <div class="row">Gated Latency <span class="toggle" onclick="flip(this)">ON</span></div>
        <div class="row">Sidewalks <span class="toggle off" onclick="flip(this)">OFF</span></div>
        <div style="color:#444; font-size:10px; margin:20px 0 10px 0; letter-spacing:1px;">SOCIAL INSULATION</div>
        <div class="row">Range Rover Density <span class="toggle" onclick="flip(this)">ON</span></div>
        <div class="row">Golden Retriever Ratio <span class="toggle" onclick="flip(this)">ON</span></div>
        <div class="row">Lawn Crew Decibels <span class="toggle off" onclick="flip(this)">OFF</span></div>
    </div>
    <div id="map"></div>
    <div class="support-footer">SUPPORT THIS PROJECT: <a href="#" style="color:#666; text-decoration:none;">CONTRIBUTE</a></div>
    <div class="index-box">
        <div style="font-size:10px; color:#444;">PQ INDEX STATUS</div>
        <div class="index-value" id="pqVal">94.2%</div>
        <div style="font-size:9px; color:#555; margin-top:5px;">WEALTH INSULATION: OPTIMAL</div>
    </div>
   <script>
        // 1. Initialize map
        var map = L.map('map', { zoomControl: false }).setView([38.5, -96.5], 4); 
        L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png').addTo(map);

        // 2. Elite Zone Data
        var zones = [
            { name: "Atherton Elite Zone", coords: [37.4613, -122.1977], purity: "99.8%" },
            { name: "Palm Beach Buffer", coords: [26.7056, -80.0364], purity: "99.2%" },
            { name: "Greenwich Insulation", coords: [41.0262, -73.6282], purity: "98.5%" },
            { name: "Bel Air Fortress", coords: [34.0833, -118.4478], purity: "99.5%" },
            { name: "Jupiter Island Sanctuary", coords: [27.0517, -80.1264], purity: "99.1%" },
            { name: "Medina Tech-Wealth Zone", coords: [47.6209, -122.2415], purity: "98.8%" }
        ];

        var highlightLayer = L.layerGroup().addTo(map);

        function drawZones() {
            highlightLayer.clearLayers();
            zones.forEach(function(zone) {
                L.circle(zone.coords, {
                    color: '#4ade80',
                    fillColor: '#4ade80',
                    fillOpacity: 0.25,
                    radius: 12000 // Made them slightly larger to see easier
                }).bindPopup("<b>" + zone.name + "</b><br>Insulation: " + zone.purity)
                  .addTo(highlightLayer);
            });
        }

        drawZones(); // Show zones immediately

        // 3. Logic Functions
        function flip(el) {
            if (el.innerText === "ON") { 
                el.innerText = "OFF"; el.classList.add("off"); 
                highlightLayer.clearLayers(); // Map goes dark
            } else { 
                el.innerText = "ON"; el.classList.remove("off"); 
                drawZones(); // Map glows again
            }
            document.getElementById('pqVal').innerText = (90 + Math.random() * 9).toFixed(1) + "%";
        }

        function toggleSidebar() {
            var sb = document.getElementById('sidebar');
            sb.style.display = (sb.style.display === 'block') ? 'none' : 'block';
            setTimeout(function() { map.invalidateSize(); }, 100);
        }

        function toggleNames() {
            var nm = document.getElementById('namesMenu');
            nm.style.display = (nm.style.display === 'block') ? 'none' : 'block';
        }

        function doSearch() { 
            alert("Analyzing buffer zones for: " + document.getElementById('addrSearch').value); 
        }

        window.onload = function() { setTimeout(function() { map.invalidateSize(); }, 500); };
    </script>
</body>
</html>
